# HiveCode tmux configuration
#
# This configuration is automatically applied when using `hivecode embedded`.
# You can also source this manually: tmux source-file /path/to/hivecode.tmux.conf
#
# For a better experience, add to your ~/.tmux.conf:
#   source-file ~/.config/hivecode/tmux.conf

# === Mouse Support ===
# Enable mouse for scrolling, pane selection, and resizing
set -g mouse on

# Let terminal apps (vim, less, etc.) handle their own scrolling
set -ga terminal-overrides ',xterm*:smcup@:rmcup@'

# === Clipboard Integration (macOS) ===
# Enable OSC 52 clipboard escape sequences
set -g set-clipboard on

# Copy on mouse drag end (macOS)
bind-key -T copy-mode MouseDragEnd1Pane send-keys -X copy-pipe-and-cancel "pbcopy"
bind-key -T copy-mode-vi y send-keys -X copy-pipe-and-cancel "pbcopy"

# === Status Bar (HiveCode Branding) ===
set -g status on
set -g status-position top
set -g status-interval 1

# Colors: dark background with amber accents
set -g status-style 'bg=#1e1e1e,fg=#ffffff'

# Left side: HiveCode branding + session name
set -g status-left '#[fg=#ffc107,bold]üêù HiveCode#[default] | #[fg=#4caf50]#S#[default] '
set -g status-left-length 40

# Right side: HiveCode mode hint + git branch + time
# [^\]mode shows users how to enter HiveCode Mode (Ctrl+\)
set -g status-right '#[fg=#666666][^\\]mode#[default] #[fg=#2196f3]#(git -C #{pane_current_path} branch --show-current 2>/dev/null)#[default] #[fg=#888888]%H:%M#[default] '
set -g status-right-length 60

# === Pane Borders ===
# Subtle borders with amber highlight for active pane
set -g pane-border-style 'fg=#444444'
set -g pane-active-border-style 'fg=#ffc107'

# Show pane titles in border
set -g pane-border-status top
set -g pane-border-format ' #{pane_title} '

# === Window/Terminal Settings ===
# Set terminal title for window managers
set -g set-titles on
set -g set-titles-string 'üêù HiveCode - #S'

# === Performance ===
# No escape delay (important for vim)
set -g escape-time 0

# Larger scroll history
set -g history-limit 50000

# === True Color Support ===
# Enable 24-bit color
set -g default-terminal 'xterm-256color'
set -ga terminal-overrides ',xterm-256color:Tc'

# === Focus Events ===
# Pass focus events to apps (vim, etc.)
set -g focus-events on

# === HiveCode Keybindings (Ctrl+b prefix) ===
# h/l: Navigate between panes (vim-style)
bind-key h select-pane -L
bind-key l select-pane -R

# D: Toggle fullscreen (zoom current pane)
bind-key D resize-pane -Z

# w: Toggle workers panel (zoom Queen pane)
# bind-key w resize-pane -Z -t ":0.0"  # Set dynamically with session name

# === HiveCode Mode (Ctrl+\) ===
# HiveCode Mode is set up dynamically by the CLI with the correct session name.
# When active, pressing Ctrl+\ enters a modal key table where:
#   w     - Toggle Dashboard visibility
#   1-4   - Attach to Worker 1-4
#   q     - Return to HiveCode (from Worker)
#   Esc   - Exit mode without action
#
# The status bar updates to show available commands when in HiveCode mode.

# === End of HiveCode Configuration ===
